<Project>

    <ItemGroup Condition="'$(Rust)'=='true'">
        <Compile Remove="target\**" />
        <EmbeddedResource Remove="target\**" />
        <None Remove="target\**" />
    </ItemGroup>

    <ItemGroup Condition="'$(RLib)'!=''">
        <None Condition="'$(IsWindows)'=='true'" Include="$(TargetLibPath)\$(RLib).dll">
            <Link>%(RecursiveDir)%(FileName)%(Extension)</Link>
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </None>
        <None Condition="'$(IsLinux)'=='true'" Include="$(TargetLibPath)\lib$(RLib).so">
            <Link>%(RecursiveDir)%(FileName)%(Extension)</Link>
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </None>
    </ItemGroup>

</Project>